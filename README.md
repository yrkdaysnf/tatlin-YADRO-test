# Консольный чат
##### Тестовое задание TATLIN

## Структура проекта
```
tatlin-YADRO-test
├─ chat              # Исходный код
│  │
│  ├─ client.py      # Реализация клиентской части
│  ├─ server.py      # Реализация серверной части
│  └─ startup        
│     ├─ tcp-client  # Алиас для запуска клиента
│     └─ tcp-server  # Алиас для запуска сервера
│
├─ Dockerfile        # Создание окружения для тестирования
└─ tcp-chat.spec     # Спеки для билда RPM - пакета
```

## Используемые модули/библиотеки
По условию нужно было использовать стандарные библиотеки и модули Python. 

Основные:
- socket
- threading
- logging

Вспомогательные:
- datetime
- os

## Инструкция по установке
### Oracle Linux:
На целевой платформе для установки RPM пакета достаточно собрать или скачать файл `tcp-chat-1.0-1.el8.noarch.rpm` из вкладки [releases](https://github.com/yrkdaysnf/tatlin-YADRO-test/releases) и установить командой:
```bash
sudo dnf install tcp-chat-1.0-1.el8.noarch.rpm
```
### На другой платформе:
В данном случае для проверки работоспособности консольного чата на целевой платформе, был использован Docker.

Сперва требуется перенести репозиторий на рабочую машину, это можно сделать командой:
```bash
git clone https://github.com/yrkdaysnf/tatlin-YADRO-test.git

cd tatlin-YADRO-test
```
Сборка образа производится командой:
```bash
docker build -t tcp-chat-rpm .
```
Через некоторое время образ будет готов, внутри уже будет установлен RPM пакет.

## Примеры использования
### Предварительные шаги для Docker:
Запустить контейнер с интерактивной консолью можно командой:
```bash
docker run --rm -it tcp-chat-rpm /bin/bash
```
Для запуска дополнительных командных строк внутри одного контейнера:
```bash
docker ps # Чтобы узнать ID контейнера

docker exec -it <ID> /bin/bash
```
### Общие шаги
Командами `tcp-server` и `tcp-client` можно запустить сервер и клиенты соответственно.

Далее будут представлены скриншоты работы консольного чата с пояснениями:

![изображение](https://github.com/user-attachments/assets/d374443f-ac23-4ec5-8cad-b5e9768ada55)

  Сервер логирует подключение и действия пользователей. 
  
  Пользователи получают подтверждение о доставке их сообщения.

![изображение](https://github.com/user-attachments/assets/e983f8f0-436d-48b5-91e9-a78537dd68fc)

  Сервер логирует отключения пользователей и ошибки пользователей.
  
  Реализована отправка приватных сообщений, защита от отправки отсутствующему пользователю и самому себе, выход с оповещением остальных пользователей.
  
![изображение](https://github.com/user-attachments/assets/c2c86d8d-ffc0-4a96-8360-bfb06617fc36)

  Остановка сервера и демонстрация логов записанных в файл.
